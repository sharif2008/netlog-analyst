{% extends "base.html" %}

{% block title %}Home - NIDS System{% endblock %}

{% block extra_css %}
<style>
    .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        padding: 40px;
    }
    .hero {
        text-align: center;
        margin-bottom: 50px;
    }
    .hero h1 {
        color: #333;
        font-size: 3em;
        margin-bottom: 15px;
    }
    .hero p {
        color: #666;
        font-size: 1.2em;
        line-height: 1.6;
    }
    .features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 50px;
    }
    .feature-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .feature-card h3 {
        font-size: 1.5em;
        margin-bottom: 15px;
    }
    .feature-card p {
        line-height: 1.6;
        opacity: 0.95;
    }
    .comparison-section {
        margin-top: 50px;
    }
    .comparison-section h2 {
        color: #333;
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 30px;
    }
    .comparison-info {
        background: #f8f9ff;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
        border-left: 4px solid #667eea;
    }
    .comparison-image {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        display: block;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    }
    .cta-button {
        display: inline-block;
        margin-top: 30px;
        padding: 15px 40px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-size: 1.2em;
        transition: transform 0.2s;
        text-align: center;
    }
    .cta-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    .cta-container {
        text-align: center;
    }
    .model-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }
    .stat-item {
        background: white;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .stat-item .value {
        font-size: 2em;
        font-weight: bold;
        color: #667eea;
        margin-bottom: 5px;
    }
    .stat-item .label {
        color: #666;
        font-size: 0.9em;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="hero">
        <h1>üõ°Ô∏è Network Intrusion Detection System</h1>
        <p>Advanced machine learning-based system for detecting network attacks and anomalies in real-time traffic data for forensic analysis</p>
    </div>

    <div class="features">
        <div class="feature-card">
            <h3>üéØ Purpose</h3>
            <p>This NIDS system is designed to analyze network traffic patterns and identify potential security threats. It uses state-of-the-art machine learning algorithms to classify network flows as either normal traffic or malicious attacks.</p>
        </div>
        <div class="feature-card">
            <h3>‚ö° Key Features</h3>
            <p>‚Ä¢ Real-time traffic analysis<br>‚Ä¢ High accuracy detection (99.9%+)<br>‚Ä¢ Support for multiple attack types<br>‚Ä¢ Detailed prediction probabilities<br>‚Ä¢ Interactive results dashboard</p>
        </div>
        <div class="feature-card">
            <h3>üî¨ Technology</h3>
            <p>Powered by Random Forest algorithm with top 30 features selected via Recursive Feature Elimination (RFE). The model achieves exceptional performance with 99.99% accuracy on test data, demonstrating outstanding detection capabilities for both benign and attack traffic.</p>
        </div>
    </div>

    <div class="comparison-section">
        <h2>üìä Model Performance Comparison</h2>
        
        <div class="comparison-info">
            <p><strong>Model Evaluation Results:</strong> The following comparison shows the performance of various machine learning models tested on the CICIDS2017 dataset. Our system uses the Random Forest model, which ranks 3rd overall with exceptional performance metrics.</p>
        </div>

        <img src="/static/model_comparison.png" alt="Model Comparison Table" class="comparison-image" onerror="this.style.display='none'; document.getElementById('comparison-table').style.display='block';">

        <div id="comparison-table" style="display: none;">
            <table style="width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 8px; overflow: hidden;">
                <thead>
                    <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <th style="padding: 15px; text-align: left;">Model</th>
                        <th style="padding: 15px; text-align: right;">Accuracy (%)</th>
                        <th style="padding: 15px; text-align: right;">Precision (%)</th>
                        <th style="padding: 15px; text-align: right;">Recall (%)</th>
                        <th style="padding: 15px; text-align: right;">F1-Score (%)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: #e8f5e9;">
                        <td style="padding: 12px; font-weight: bold;">XGBoost</td>
                        <td style="padding: 12px; text-align: right;">99.943785</td>
                        <td style="padding: 12px; text-align: right;">99.943828</td>
                        <td style="padding: 12px; text-align: right;">99.943785</td>
                        <td style="padding: 12px; text-align: right;">99.943795</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: bold;">CatBoost</td>
                        <td style="padding: 12px; text-align: right;">99.939461</td>
                        <td style="padding: 12px; text-align: right;">99.939488</td>
                        <td style="padding: 12px; text-align: right;">99.939461</td>
                        <td style="padding: 12px; text-align: right;">99.939468</td>
                    </tr>
                    <tr style="background: #fff3e0; border-left: 4px solid #667eea;">
                        <td style="padding: 12px; font-weight: bold;">RandomForest ‚≠ê (Current Model)</td>
                        <td style="padding: 12px; text-align: right; font-weight: bold;">99.985</td>
                        <td style="padding: 12px; text-align: right; font-weight: bold;">99.984</td>
                        <td style="padding: 12px; text-align: right; font-weight: bold;">99.985</td>
                        <td style="padding: 12px; text-align: right; font-weight: bold;">99.985</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: bold;">DecisionTree</td>
                        <td style="padding: 12px; text-align: right;">99.900543</td>
                        <td style="padding: 12px; text-align: right;">99.900555</td>
                        <td style="padding: 12px; text-align: right;">99.900543</td>
                        <td style="padding: 12px; text-align: right;">99.900548</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: bold;">KNN</td>
                        <td style="padding: 12px; text-align: right;">99.721087</td>
                        <td style="padding: 12px; text-align: right;">99.721000</td>
                        <td style="padding: 12px; text-align: right;">99.721087</td>
                        <td style="padding: 12px; text-align: right;">99.721026</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: bold;">GradientBoosting</td>
                        <td style="padding: 12px; text-align: right;">99.712439</td>
                        <td style="padding: 12px; text-align: right;">99.712907</td>
                        <td style="padding: 12px; text-align: right;">99.712439</td>
                        <td style="padding: 12px; text-align: right;">99.712065</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: bold;">AdaBoost</td>
                        <td style="padding: 12px; text-align: right;">98.988130</td>
                        <td style="padding: 12px; text-align: right;">98.992466</td>
                        <td style="padding: 12px; text-align: right;">98.988130</td>
                        <td style="padding: 12px; text-align: right;">98.989566</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: bold;">SVM_RBF</td>
                        <td style="padding: 12px; text-align: right;">97.005470</td>
                        <td style="padding: 12px; text-align: right;">97.048623</td>
                        <td style="padding: 12px; text-align: right;">97.005470</td>
                        <td style="padding: 12px; text-align: right;">96.962801</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: bold;">LogisticRegression</td>
                        <td style="padding: 12px; text-align: right;">92.168818</td>
                        <td style="padding: 12px; text-align: right;">92.095736</td>
                        <td style="padding: 12px; text-align: right;">92.168818</td>
                        <td style="padding: 12px; text-align: right;">91.993151</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: bold;">NaiveBayes</td>
                        <td style="padding: 12px; text-align: right;">40.206698</td>
                        <td style="padding: 12px; text-align: right;">79.370282</td>
                        <td style="padding: 12px; text-align: right;">40.206698</td>
                        <td style="padding: 12px; text-align: right;">35.688900</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="model-stats">
            <div class="stat-item">
                <div class="value">99.99%</div>
                <div class="label">Overall Accuracy</div>
            </div>
            <div class="stat-item">
                <div class="value">99.98%</div>
                <div class="label">Weighted Avg F1-Score</div>
            </div>
            <div class="stat-item">
                <div class="value">33,857</div>
                <div class="label">Test Samples</div>
            </div>
            <div class="stat-item">
                <div class="value">30</div>
                <div class="label">Selected Features (RFE)</div>
            </div>
        </div>

        <div class="evaluation-section" style="margin-top: 40px; background: #f8f9ff; padding: 30px; border-radius: 10px; border-left: 4px solid #667eea;">
            <h3 style="color: #667eea; margin-bottom: 20px; font-size: 1.8em;">üìà Detailed Model Evaluation</h3>
            <p style="color: #666; margin-bottom: 25px; line-height: 1.6;">
                <strong>RandomForest Model (Top 30 Features via RFE)</strong> - Comprehensive evaluation on test dataset with 33,857 samples.
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 25px;">
                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <h4 style="color: #667eea; margin-bottom: 15px; font-size: 1.1em;">BENIGN Class</h4>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #666;">Precision:</span>
                        <strong style="color: #2e7d32;">99.97%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #666;">Recall:</span>
                        <strong style="color: #2e7d32;">99.99%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #666;">F1-Score:</span>
                        <strong style="color: #2e7d32;">99.98%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                        <span style="color: #666;">Support:</span>
                        <strong>14,602</strong>
                    </div>
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <h4 style="color: #667eea; margin-bottom: 15px; font-size: 1.1em;">ATTACK Class</h4>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #666;">Precision:</span>
                        <strong style="color: #c62828;">99.99%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #666;">Recall:</span>
                        <strong style="color: #c62828;">99.98%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #666;">F1-Score:</span>
                        <strong style="color: #c62828;">99.99%</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                        <span style="color: #666;">Support:</span>
                        <strong>19,255</strong>
                    </div>
                </div>
            </div>

            <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-top: 20px;">
                <h4 style="color: #667eea; margin-bottom: 15px; font-size: 1.1em;">üìä Confusion Matrix Summary</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; text-align: center;">
                    <div style="padding: 15px; background: #e8f5e9; border-radius: 5px;">
                        <div style="font-size: 1.5em; font-weight: bold; color: #2e7d32;">14,601</div>
                        <div style="color: #666; font-size: 0.9em;">True BENIGN</div>
                    </div>
                    <div style="padding: 15px; background: #ffebee; border-radius: 5px;">
                        <div style="font-size: 1.5em; font-weight: bold; color: #c62828;">1</div>
                        <div style="color: #666; font-size: 0.9em;">False Positive</div>
                    </div>
                    <div style="padding: 15px; background: #ffebee; border-radius: 5px;">
                        <div style="font-size: 1.5em; font-weight: bold; color: #c62828;">4</div>
                        <div style="color: #666; font-size: 0.9em;">False Negative</div>
                    </div>
                    <div style="padding: 15px; background: #e8f5e9; border-radius: 5px;">
                        <div style="font-size: 1.5em; font-weight: bold; color: #2e7d32;">19,251</div>
                        <div style="color: #666; font-size: 0.9em;">True ATTACK</div>
                    </div>
                </div>
                <p style="margin-top: 15px; color: #666; font-size: 0.9em; text-align: center;">
                    <strong>Error Rate:</strong> Only 5 misclassifications out of 33,857 samples (0.015% error rate)
                </p>
            </div>
        </div>
    </div>

    <div class="cta-container">
        <a href="/analysis" class="cta-button">Start Analysis ‚Üí</a>
    </div>
</div>
{% endblock %}
